import{a as h,t as w,b as m}from"./IJMoEVRx.js";import{p as j,b as E,s as y,c as A,f as M,g as i,n as I,t as p,r as $,e as V,d as Y,a as q}from"./DVmdCokJ.js";import{s as g,p as z}from"./D1rJHNN0.js";import{i as P}from"./CJVv8vLi.js";import{e as O,i as T}from"./Dp8kRQl_.js";import{L as F}from"./W9vy9Tiv.js";import{s as S}from"./CqQZoR6b.js";import{o as G,a as J}from"./nV-4aG2w.js";import{A as Q}from"./Gc-VDlzX.js";import{L as U}from"./BDMEyPIU.js";const W=r=>{const t=document.getElementById(r);if(t===null){console.error(`Invalid scrollToId with id: ${r}`);return}const n=t.getBoundingClientRect().top+window.scrollY-45;window.scroll({top:n,behavior:"smooth"})};var X=w("<!><!>",1),Z=w("<sup>[<!>]</sup>");function me(r,t){j(t,!0);let n=V(()=>Array.isArray(t.ref)?t.ref.slice().sort((v,e)=>v.index-e.index):[t.ref]);var o=Z(),u=y(A(o));O(u,17,()=>i(n),T,(v,e,a)=>{var f=X(),d=M(f);{var b=c=>{var C=m(",");h(c,C)};P(d,c=>{a>0&&c(b)})}var _=y(d);F(_,{callback:()=>{i(e).highlight.push(i(e).index),W(`bibliography-index-${i(e).index}`)},children:(c,C)=>{I();var x=m();p(()=>g(x,i(e).index)),h(c,x)},$$slots:{default:!0}}),h(v,f)}),I(),$(o),h(r,o),E()}var ee=w('<span style="font-style: italic"> </span>'),te=w("<div><!></div> <div><!><!><!><!>.</div>",1),re=w('<div class="bibliography svelte-57ye03"></div>');function be(r,t){j(t,!0);let n=q(void 0);const o=v=>{Y(n,z(v))};G(()=>{t.highlightPipe.subscribe(o)}),J(()=>{t.highlightPipe.unsubscribe(o)});var u=re();O(u,21,()=>t.ordered,T,(v,e,a)=>{var f=te(),d=M(f),b=A(d);Q(b,{name:`bibliography-index-${a+1}`,children:(s,l)=>{I();var k=m();k.nodeValue=`${a+1}.`,h(s,k)},$$slots:{default:!0}}),$(d);var _=y(d,2),c=A(_);{var C=s=>{var l=m();p(()=>g(l,`${i(e).author}, `)),h(s,l)};P(c,s=>{i(e).author&&s(C)})}var x=y(c);{var D=s=>{U(s,{get href(){return i(e).url},children:(l,k)=>{I();var L=m();p(()=>g(L,i(e).title)),h(l,L)},$$slots:{default:!0}})},H=s=>{var l=ee(),k=A(l,!0);$(l),p(()=>g(k,i(e).title)),h(s,l)};P(x,s=>{i(e).url?s(D):s(H,!1)})}var B=y(x);{var K=s=>{var l=m();p(()=>g(l,`, ${i(e).publisher}`)),h(s,l)};P(B,s=>{i(e).publisher&&s(K)})}var N=y(B);{var R=s=>{var l=m();p(()=>g(l,`, Accessed: ${i(e).accessed}`)),h(s,l)};P(N,s=>{i(e).accessed&&s(R)})}I(),$(_),p(()=>{S(d,`bib-item bib-item-left ${(i(n)!==a+1?"":"bib-item-selected")??""} svelte-57ye03`),S(_,`bib-item bib-item-right ${(i(n)!==a+1?"":"bib-item-selected")??""} svelte-57ye03`)}),h(v,f)}),$(u),h(r,u),E()}const se=()=>{let r=!1,t;const n=new Set;return{push:o=>{r=!0,t=o;for(const u of n)u(o)},subscribe:o=>{n.add(o),r&&o(t)},unsubscribe:o=>{n.delete(o)}}},oe=()=>Intl.Collator(navigator.languages).compare,ie=r=>{const t=[];return r.author&&t.push(r.author),r.title&&t.push(r.title),r.publisher&&t.push(r.publisher),r.url&&t.push(r.url),t},ge=r=>{const t=[];for(const[e,a]of Object.entries(r))t.push({key:ie(a),name:e,citation:a});const n=oe();t.sort((e,a)=>{const f=Math.min(e.key.length,a.key.length);for(let d=0;d<f;d++){const b=n(e.key[d],a.key[d]);if(b!==0)return b}return e.key.length-a.key.length});const o=se(),u=[],v={};for(let e=0;e<t.length;e++){const a=t[e];u.push(a.citation),v[a.name]={index:e+1,highlight:o}}return{highlightPipe:o,ordered:u,get:v}};export{be as B,me as C,ge as c,W as s};
